(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{740:function(s,e,a){"use strict";a.r(e);var r=a(4),t=Object(r.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("使用MyBatis往MySQL数据库中插入一条记录后，需要返回该条记录的自增主键值。")]),s._v(" "),a("p",[s._v("方法：在mapper中指定keyProperty属性，示例如下：")]),s._v(" "),a("h2",{attrs:{id:"xml代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xml代码"}},[s._v("#")]),s._v(" Xml代码")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<insert id="insertAndGetId" useGeneratedKeys="true" keyProperty="userId" parameterType="com.chenzhou.mybatis.User">  \n    insert into user(userName,password,comment)  \n    values(#{userName},#{password},#{comment})  \n</insert>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v('如上所示，我们在insert中指定了keyProperty="userId"，其中userId代表插入的User对象的主键属性。')]),s._v(" "),a("h2",{attrs:{id:"user-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user-java"}},[s._v("#")]),s._v(" User.java")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("public class User {  \n    private int userId;  \n    private String userName;  \n    private String password;  \n    private String comment;  \n      \n    //setter and getter  \n}  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"userdao-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#userdao-java"}},[s._v("#")]),s._v(" UserDao.java")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("public interface UserDao {  \n  \n    public int insertAndGetId(User user);  \n  \n}  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"测试："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试："}},[s._v("#")]),s._v(" 测试：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('User user = new User();  \nuser.setUserName("chenzhou");  \nuser.setPassword("xxxx");  \nuser.setComment("测试插入数据返回主键功能");  \n  \nSystem.out.println("插入前主键为："+user.getUserId());  \nuserDao.insertAndGetId(user);//插入操作  \nSystem.out.println("插入后主键为："+user.getUserId());  \n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"输出："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输出："}},[s._v("#")]),s._v(" 输出：")]),s._v(" "),a("ol",[a("li",[s._v("插入前主键为：0")]),s._v(" "),a("li",[s._v("插入后主键为：15")])])])}),[],!1,null,null,null);e.default=t.exports}}]);