(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{693:function(s,a,t){"use strict";t.r(a);var r=t(4),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"准备redis的配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备redis的配置文件"}},[s._v("#")]),s._v(" 准备redis的配置文件")]),s._v(" "),t("p",[s._v("因为需要redis的配置文件，这里最好还是去redis的官方去下载一个redis使用里面的配置文件即可")]),s._v(" "),t("p",[s._v("redis中文官方网站："),t("a",{attrs:{href:"https://links.jianshu.com/go?to=http%3A%2F%2Fwww.redis.cn%2Fdownload.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://www.redis.cn/download.html"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("img",{attrs:{src:"https:////upload-images.jianshu.io/upload_images/14735202-1ddf3f3c176decfb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1108/format/webp",alt:"img"}})]),s._v(" "),t("p",[s._v("下载后解压出来：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https:////upload-images.jianshu.io/upload_images/14735202-d4605e4a41d40503.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp",alt:"img"}})]),s._v(" "),t("p",[s._v("这个redis.conf文件就是咱们需要的，为了保险，还是拷贝一下，做个备份。")]),s._v(" "),t("h2",{attrs:{id:"配置redis-conf配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置redis-conf配置文件"}},[s._v("#")]),s._v(" 配置redis.conf配置文件")]),s._v(" "),t("p",[s._v("修改redis.conf配置文件：\n主要配置的如下：")]),s._v(" "),t("blockquote",[t("p",[s._v("bind 127.0.0.1 #注释掉这部分，使redis可以外部访问\ndaemonize no#用守护线程的方式启动\nrequirepass 你的密码#给redis设置密码\nappendonly yes#redis持久化　　默认是no\ntcp-keepalive 300 #防止出现远程主机强迫关闭了一个现有的连接的错误 默认是300")])]),s._v(" "),t("h2",{attrs:{id:"创建本地与docker映射的目录，即本地存放的位置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建本地与docker映射的目录，即本地存放的位置"}},[s._v("#")]),s._v(" 创建本地与docker映射的目录，即本地存放的位置")]),s._v(" "),t("p",[s._v("创建本地存放redis的位置")]),s._v(" "),t("blockquote",[t("p",[s._v("可以自定义，因为我的docker的一些配置文件都是存放在/data目录下面的，所以我依然在/data目录下创建一个redis目录，这样是为了方便后期管理")])]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("truedei"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@truedei")]),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":redis")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("$ sudo mkdir "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis\ntruedei"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@truedei")]),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":redis")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("$ sudo mkdir "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("把配置文件拷贝到刚才创建好的文件里")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("truedei"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@truedei")]),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":redis")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("$ sudo cp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token regex-literal"}},[t("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/redis/")])]),s._v("\ntruedei"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@truedei")]),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":redis")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("$ \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"启动docker-redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动docker-redis"}},[s._v("#")]),s._v(" 启动docker redis")]),s._v(" "),t("p",[s._v("启动：")]),s._v(" "),t("div",{staticClass:"language-kotlin line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-kotlin"}},[t("code",[t("span",{pre:!0,attrs:{class:"token label symbol"}},[s._v("truedei@")]),s._v("truedei"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("~$ sudo docker run "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("name redis "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d redis redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("appendonly yes\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参数解释：")]),s._v(" "),t("blockquote",[t("p",[s._v("-p 6379:6379:把容器内的6379端口映射到宿主机6379端口\n-v /data/redis/redis.conf:/etc/redis/redis.conf：把宿主机配置好的redis.conf放到容器内的这个位置中\n-v /data/redis/data:/data：把redis持久化的数据在宿主机内显示，做数据备份\nredis-server /etc/redis/redis.conf：这个是关键配置，让redis不是无配置启动，而是按照这个redis.conf的配置启动\n–appendonly yes：redis启动后数据持久化")])]),s._v(" "),t("h2",{attrs:{id:"查看是否启动成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看是否启动成功"}},[s._v("#")]),s._v(" 查看是否启动成功")]),s._v(" "),t("p",[s._v("查看是否成功启动：sudo docker ps")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("truedei"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@truedei")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v("$ sudo docker ps\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CONTAINER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ID")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IMAGE")]),s._v("               "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COMMAND")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CREATED")]),s._v("             "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("STATUS")]),s._v("              "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PORTS")]),s._v("                               "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NAMES")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("85")]),s._v("cb7d83a2ff        redis               "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')])]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" minutes ago       Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" minutes        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tcp              redis\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("a122a08125f        mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".29")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')])]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" weeks ago         Up About an hour    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tcp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33060")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tcp   mysql57\ntruedei"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@truedei")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v("$ \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("可以查看一下日志：sudo docker logs redis")])])}),[],!1,null,null,null);a.default=e.exports}}]);