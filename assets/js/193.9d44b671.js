(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{847:function(e,s,a){"use strict";a.r(s);var t=a(4),r=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"docker容器部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker容器部署"}},[e._v("#")]),e._v(" "),a("strong",[e._v("Docker容器部署")])]),e._v(" "),a("p",[e._v("服务器最低配置：4核6g内存")]),e._v(" "),a("h3",{attrs:{id:"joolun版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#joolun版本"}},[e._v("#")]),e._v(" JooLun版本")]),e._v(" "),a("ul",[a("li",[e._v("V2.2.3+")]),e._v(" "),a("li",[e._v("如果你对docker不熟悉请直接用"),a("a",{attrs:{href:"https://git.joolun.com/joolun-mp-ma/mp-ma/wiki/%E4%B8%80-%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%EF%BC%88centos7%EF%BC%89",target:"_blank",rel:"noopener noreferrer"}},[e._v("jar部署"),a("OutboundLink")],1)])]),e._v(" "),a("h3",{attrs:{id:"安装docker-（centos7）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装docker-（centos7）"}},[e._v("#")]),e._v(" 安装Docker （centos7）")]),e._v(" "),a("p",[e._v("#更新yum 源")]),e._v(" "),a("p",[e._v("yum update")]),e._v(" "),a("p",[e._v("#安装 Docker")]),e._v(" "),a("p",[e._v("yum -y install docker")]),e._v(" "),a("p",[e._v("#启动 Docker 后台服务、开机自启")]),e._v(" "),a("p",[e._v("systemctl start docker.service")]),e._v(" "),a("p",[e._v("systemctl enable docker.service")]),e._v(" "),a("h3",{attrs:{id:"安装python-pip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装python-pip"}},[e._v("#")]),e._v(" 安装python-pip")]),e._v(" "),a("p",[e._v("yum -y install epel-release")]),e._v(" "),a("p",[e._v("yum -y install python-pip")]),e._v(" "),a("h3",{attrs:{id:"安装docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装docker-compose"}},[e._v("#")]),e._v(" 安装docker-compose")]),e._v(" "),a("p",[e._v("pip install docker-compose")]),e._v(" "),a("p",[e._v("待安装完成后，执行查询版本的命令")]),e._v(" "),a("p",[e._v("sudo docker-compose version")]),e._v(" "),a("h3",{attrs:{id:"joolun打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#joolun打包"}},[e._v("#")]),e._v(" joolun打包")]),e._v(" "),a("p",[e._v("mvn clean install")]),e._v(" "),a("p",[e._v("将打包后的joolun文件夹整个传到服务器（可以手动把源码删掉，保留各个服务target下的jar包就可以了）")]),e._v(" "),a("h3",{attrs:{id:"cd到joolun主目录下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cd到joolun主目录下"}},[e._v("#")]),e._v(" cd到joolun主目录下")]),e._v(" "),a("p",[e._v("1、构建镜像")]),e._v(" "),a("p",[e._v("docker-compose build")]),e._v(" "),a("p",[e._v("2、启动容器 （-d 第一次不要加，方便看报错）")]),e._v(" "),a("p",[e._v("docker-compose up -d")]),e._v(" "),a("p",[e._v("3、等待几分钟")]),e._v(" "),a("h3",{attrs:{id:"商城版要将redis的key过期推送功能打开，否则订单无法自动取消（自行百度redis的key过期推送怎么打开）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#商城版要将redis的key过期推送功能打开，否则订单无法自动取消（自行百度redis的key过期推送怎么打开）"}},[e._v("#")]),e._v(" 商城版要将redis的key过期推送功能打开，否则订单无法自动取消（自行百度redis的key过期推送怎么打开）")]),e._v(" "),a("h3",{attrs:{id:"相关docker操作命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关docker操作命令"}},[e._v("#")]),e._v(" 相关docker操作命令")]),e._v(" "),a("p",[e._v("#列出所有的容器 ID")]),e._v(" "),a("p",[e._v("docker ps -aq")]),e._v(" "),a("p",[e._v("#停止所有的容器")]),e._v(" "),a("p",[e._v("docker stop $(docker ps -aq)")]),e._v(" "),a("p",[e._v("#删除所有的容器")]),e._v(" "),a("p",[e._v("docker rm $(docker ps -aq)")]),e._v(" "),a("p",[e._v("#删除所有的镜像")]),e._v(" "),a("p",[e._v("docker rmi $(docker images -q)")]),e._v(" "),a("p",[e._v("#进入某个容器")]),e._v(" "),a("p",[e._v("docker exec -it 容器名称 /bin/sh")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker exec -it base-nacos /bin/sh\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("#参看容器日志")]),e._v(" "),a("p",[e._v("docker logs 容器名称")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker logs base-nacos\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("#单独启动某个容器")]),e._v(" "),a("p",[e._v("docker start 容器名称")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker start base-nacos\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"注意：joolun-db-下的脚本每次构建都会drop-create-table初始化数据库，实际使用过程中要自行修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意：joolun-db-下的脚本每次构建都会drop-create-table初始化数据库，实际使用过程中要自行修改"}},[e._v("#")]),e._v(" 注意："),a("code",[e._v("joolun/db/")]),e._v("下的脚本每次构建都会"),a("code",[e._v("DROP/CREATE table")]),e._v("初始化数据库，实际使用过程中要自行修改")]),e._v(" "),a("h3",{attrs:{id:"前端部署请查看（-a-生产环境部署（centos7））"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端部署请查看（-a-生产环境部署（centos7））"}},[e._v("#")]),e._v(" 前端部署请查看（ A-生产环境部署（centos7））")])])}),[],!1,null,null,null);s.default=r.exports}}]);