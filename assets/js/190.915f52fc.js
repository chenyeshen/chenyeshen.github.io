(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{838:function(e,s,a){"use strict";a.r(s);var t=a(4),r=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h3",{attrs:{id:"一、下载zookeeper的安装包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、下载zookeeper的安装包"}},[e._v("#")]),e._v(" 一、下载zookeeper的安装包")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("wget https://dlcdn.apache.org/zookeeper/zookeeper-3.7.0/apache-zookeeper-3.7.0-bin.tar.gz\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"二、解压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、解压缩"}},[e._v("#")]),e._v(" 二、解压缩")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("tar -zxvf apache-zookeeper-3.7.0-bin.tar.gz \n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("最好也改个名字")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("mv apache-zookeeper-3.7.0-bin zookeeper\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"三、创建日志和数据文件夹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、创建日志和数据文件夹"}},[e._v("#")]),e._v(" 三、创建日志和数据文件夹")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("mkdir -p /var/zookeeper/data\n\nmkdir -p /var/zookeeper/logs\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"四、修改conf的配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、修改conf的配置文件"}},[e._v("#")]),e._v(" 四、修改conf的配置文件")]),e._v(" "),a("p",[e._v("备份zoo_sample.cfg")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("cp -p zoo_sample.cfg zookbat.cfg\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("通常zookeeper的默认配置文件会是zoo.cfg,因此我们把zoo_sample.cfg改成zoo.cfg")]),e._v(" "),a("p",[e._v("mv zoo_sample.cfg zoo.cfg")]),e._v(" "),a("p",[e._v("然后修改配置文件如下：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("tickTime\t2000\t控制心跳和超时(毫秒)\ninitLimit\t10\tfollower连接到主节点的初始化时间\nsyncLimit\t5\t主从节点请求和应答时间长度\ndataDir\t/var/zookeeper/data\t用于存储zookeeper产生的数据\ndataLogDir\t/var/zookeeper/logs\t用于存储zookeeper的日志\nclientPort\t2181\tZookeeper客户端端口\nmaxClientCnxn\t0\t为0则不限制客户端连接数量\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("在自己为zookeeper产生数据创建的data目录下再去创建一个myid文件，添加序号")]),e._v(" "),a("p",[e._v("在自己为zookeeper产生数据创建的data目录下再去创建一个myid文件，添加序号")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("cd /var/zookeeper/data\n\nvim myid\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("比如我自己在myid文件中只写了一个1")]),e._v(" "),a("p",[e._v("比如我自己在myid文件中只写了一个1")]),e._v(" "),a("p",[e._v("如果这里要做集群的话，那么就还需要在zoo.cfg文件末尾额外添加一些信息：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("server.1=192.168.228.138:2888:3888\nserver.2=192.168.228.139:2888:3888\nserver.3=192.168.228.140:2888:3888\nserver.4=192.168.228.141:2888:3888\nserver.5=192.168.228.142:2888:3888\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("这里的server.1中的1就是上面创建的myid里面的数字")]),e._v(" "),a("h3",{attrs:{id:"五、添加路径到-etc-profile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、添加路径到-etc-profile"}},[e._v("#")]),e._v(" 五、添加路径到/etc/profile")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo vim /etc/profile\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("然后修改")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("#this is for zookeeper environment\n\nexport ZOOKEEPER_HOME=/root/zookeeper\nexport PATH=$ZOOKEEPER_HOME/bin:$PATH\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("其中/usr/local/software/zookeeper为服务器上zookeeper的安装目录，注意这里不需要到bin目录下")]),e._v(" "),a("h3",{attrs:{id:"六、修改完了之后，记得让这个文件生效"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、修改完了之后，记得让这个文件生效"}},[e._v("#")]),e._v(" 六、修改完了之后，记得让这个文件生效")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("source /etc/profile\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("安装jdk")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("yum search jdk   // 搜索\n\nyum install java-1.8.0-openjdk.x86_64\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"七、启动服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七、启动服务端"}},[e._v("#")]),e._v(" 七、启动服务端")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("zkServer.sh start\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"八、启动客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#八、启动客户端"}},[e._v("#")]),e._v(" 八、启动客户端")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("zkCli.sh -server localhost:2181\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"九、创建节点、获取节点内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#九、创建节点、获取节点内容"}},[e._v("#")]),e._v(" 九、创建节点、获取节点内容")]),e._v(" "),a("p",[e._v("创建节点：")]),e._v(" "),a("p",[a("strong",[e._v("-e 选项表示创建临时节点")]),e._v(" "),a("strong",[e._v("-s 选项表示创建永久结点")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("create -s /snow 00\ncreate -e /snow-tmp 11\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("获取节点：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("get /snow-tmp \n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("设置节点的值：")]),e._v(" "),a("p",[e._v("设置节点的值：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("set /snow-tmp 111\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("获取历史命令:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("history\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);